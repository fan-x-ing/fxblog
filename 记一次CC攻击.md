title: 记一次CC攻击
categories: 分享
tags: [CDN,CC,DDOS,图床]
date: 2021-10-17 12:23:00
---
# 起因

从八月中旬开始，我做了一款 `StarPIC`，也就是 `星图`。我做了之后，就有一些人进行恶意盗刷流量，等等。我的星图采取的是 `腾讯云CDN`进行分发，腾讯云CDN的价格是很昂贵的，至少按量计费不便宜。

> 建议各位使用主题自带的阅读模式，沉浸式阅读，更专心阅读文章

## 第一次攻击

攻击者的第一次攻击，是在八月份中旬或九月初，我也记不清了，这一次的攻击量全部给到了星图官网，由于他们的攻击节点大部分为海外服务器。我的海外 `CDN`加速采取的又是 `cloudfalre` pro版本，再加上我又写了一些规则什么的，这次攻击并未造成大碍，但是量依然不小。

![noiE.webp](https://q2.a1pic.cn/noiE.webp)

第一次攻击就这么结束了

> 规则自己写的，有点菜，希望大佬指导

## 第一-四次攻击

由于攻击次数过多，我也不一一赘述，我这次把一到四次的总量全部列出来，以供大家参考。

第一次攻击打到了星图主站上，但是并无大碍。

也许攻击者发现了这一点，于是第二次便攻击到了我的储存节点上！！！这次攻击者也学聪明了，攻击节点统一全是国内，所以并未使用 `cloudflare`的 `CDN`，而是由 `腾讯云CDN`全权承包。由于我的储存节点为阿里云OSS，哪怕我使用了 `cloudflare`免流，加上高缓存的制度，请求量依旧让我震惊。

[tabs]
[tab name="cloudflare" active="true"]`<img src="https://q2.a1pic.cn/nw8F.webp" alt="rnHAKLM2" border="0">`[/tab]
[tab name="腾讯云CDN"]`<img src="<img src="https://q2.a1pic.cn/nWpp.png" alt="KFyYUq8e" border="0">" alt="rnHAKLM2" border="0">`[/tab]
[/tabs]

腾讯云CDN的量并未是全部，其中有一部分我是丢了的，因为域名已经删了查不到了，但是我清楚的记得，走了差不多1个多TB的流量。

## 总结

对于我来说，这确实是一次教训，也是一次成长。现在我学会了在腾讯云设置防火墙来限制入口，我也做了一些别的策略。当然这也是我的一次失败，就在这么简单的CC攻击下，星图就已经垮了。这次的失败也提醒了我，公共的服务不是这么好做的。

> 以上仅个人意见，大佬不喜勿喷~~